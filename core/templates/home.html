{% extends 'master.html' %}
{% load static %}

{% block content %}
  <div class="position-relative overflow-hidden p-3 p-md-5 text-center bg-dark text-white" style="background-image: url('{% static 'assets/paternez-store.jpg' %}'); background-size: cover; background-position: center; min-height: 500px;">
    <div class="position-absolute top-0 start-0 w-100 h-100" style="background-color: rgba(0, 0, 0, 0.6);"></div>

    <div class="position-relative col-md-6 p-lg-5 mx-auto my-5">
      <h1 class="display-4 fw-bold text-warning">Paternez Store</h1>
      <p class="lead fw-normal mb-4">Premium groceries and fine provisions delivered straight to your doorstep. Experience quality you can taste.</p>

      {% if user.is_authenticated %}
        <a class="btn btn-warning btn-lg fw-bold" href="{% url 'products' %}">Start Shopping</a>
        <p class="mt-3 text-white-50">Welcome back, {{ user.username }}!</p>
      {% else %}
        <div class="d-flex gap-2 justify-content-center">
          <a class="btn btn-warning btn-lg fw-bold" href="{% url 'register' %}">Join Now</a>
          <a class="btn btn-outline-light btn-lg" href="{% url 'login' %}">Sign In</a>
        </div>
      {% endif %}
    </div>
  </div>

  <div class="container my-5">
    <div class="row text-center g-4">
      <div class="col-md-4">
        <div class="card border-0 shadow-sm h-100 py-4">
          <div class="card-body">
            <i class="bi bi-truck text-success display-4 mb-3"></i>
            <h5 class="card-title fw-bold">Fast Delivery</h5>
            <p class="card-text text-muted">Same-day delivery for orders placed before 2 PM.</p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card border-0 shadow-sm h-100 py-4">
          <div class="card-body">
            <i class="bi bi-award text-warning display-4 mb-3"></i>
            <h5 class="card-title fw-bold">Premium Quality</h5>
            <p class="card-text text-muted">We source only the finest ingredients for your home.</p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card border-0 shadow-sm h-100 py-4">
          <div class="card-body">
            <i class="bi bi-shield-check text-primary display-4 mb-3"></i>
            <h5 class="card-title fw-bold">Secure Payment</h5>
            <p class="card-text text-muted">100% secure payment processing for your peace of mind.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container mb-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="fw-bold border-start border-5 border-warning ps-3">Featured Products</h2>
      <a href="{% url 'products' %}" class="btn btn-outline-dark">View All Products <i class="bi bi-arrow-right"></i></a>
    </div>

    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
      {% for product in featured_products %}
        <div class="col">
          <div class="card h-100 shadow-sm border-0">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">{{ product.name }}</h5>
              <p class="card-text text-success fw-bold fs-5">${{ product.price }}</p>

              <div class="mt-auto">
                {% if user.is_authenticated %}
                  <form action="{% url 'add_to_cart' product.id %}" method="post">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-outline-primary w-100"><i class="bi bi-cart-plus"></i> Add</button>
                  </form>
                {% else %}
                  <a href="{% url 'login' %}" class="btn btn-outline-secondary w-100">Login to Buy</a>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>

  <section class="bg-light py-5">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-6">
          <img src="{% static 'assets/shop-now-banner.webp' %}" class="img-fluid rounded shadow" alt="Promo" />
        </div>
        <div class="col-md-6 mt-4 mt-md-0 ps-md-5">
          <h2 class="fw-bold mb-3">Freshness You Can Trust</h2>
          <p class="lead text-muted">From farm to table, we ensure every item meets our high standards of quality and freshness.</p>
          <a href="{% url 'products' %}" class="btn btn-dark btn-lg mt-3">Explore Our Catalog</a>
        </div>
      </div>
    </div>
  </section>
{% endblock content %}